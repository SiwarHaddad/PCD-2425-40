<!-- report-detail.component.html -->
<div class="report-container">
  <div class="report-header">
    <h1>Report Details</h1>
    <div class="report-id" *ngIf="reportId">ID: {{ reportId }}</div>
  </div>

  <div *ngIf="loading" class="loading-container">
    <app-loading-spinner></app-loading-spinner>
  </div>

  <div *ngIf="error" class="error-message">
    {{ error }}
  </div>

  <ng-container *ngIf="report$ | async as report">
    <div class="report-content">
      <div class="report-title-section">
        <h2>{{ report.title }}</h2>
        <span class="report-status" [ngClass]="report.status?.toLowerCase()">
          {{ report.status }}
        </span>
      </div>

      <div class="report-details-grid">
        <div class="detail-item">
          <span class="label">Case Number:</span>
          <span class="value">{{ report.caseNumber || 'N/A' }}</span>
        </div>

        <div class="detail-item">
          <span class="label">Case ID:</span>
          <span class="value">{{ report.caseId }}</span>
        </div>

        <div class="detail-item">
          <span class="label">Report Type:</span>
          <span class="value">{{ report.reportType }}</span>
        </div>

        <div class="detail-item">
          <span class="label">Created:</span>
          <span class="value">{{ report.createdAt | date:'medium' }}</span>
        </div>

        <div class="detail-item">
          <span class="label">Last Updated:</span>
          <span class="value">{{ report.updatedAt | date:'medium' }}</span>
        </div>

        <div class="detail-item" *ngIf="report.generatedBy">
          <span class="label">Generated By:</span>
          <span class="value">{{ report.generatedBy }}</span>
        </div>
      </div>

      <div class="report-section">
        <h3>Description</h3>
        <p class="description">{{ report.description || 'No description provided.' }}</p>
      </div>

      <div class="report-section" *ngIf="report.verdict">
        <h3>Verdict</h3>
        <div class="verdict">{{ report.verdict }}</div>
      </div>

      <div class="report-section" *ngIf="report.judicialNotes">
        <h3>Judicial Notes</h3>
        <div class="judicial-notes">{{ report.judicialNotes }}</div>
      </div>

      <div class="report-section" *ngIf="report.analyses && report.analyses.length > 0">
        <h3>Analyses</h3>
        <div class="analyses-list">
          <div class="analysis-item" *ngFor="let analysis of report.analyses; let i = index">
            <div class="analysis-header">
              <strong>Analysis {{ i + 1 }}</strong>
            </div>
            <pre class="analysis-data">{{ analysis | json }}</pre>
          </div>
        </div>
      </div>

      <div class="report-section" *ngIf="report.imageUrls && report.imageUrls.length > 0">
        <h3>Images</h3>
        <div class="images-grid">
          <div class="image-item" *ngFor="let imageUrl of report.imageUrls">
            <img ngSrc="imageUrl" alt="Report image" />
          </div>
        </div>
      </div>

      <div class="report-section" *ngIf="report.attachmentIds && report.attachmentIds.length > 0">
        <h3>Attachments</h3>
        <div class="attachments-list">
          <div class="attachment-item" *ngFor="let attachmentId of report.attachmentIds">
            <span class="attachment-id">{{ attachmentId }}</span>
          </div>
        </div>
      </div>

      <div class="report-actions">
        <a *ngIf="report.pdfUrl" [href]="report.pdfUrl" target="_blank" class="btn-download">
          Download PDF
        </a>
        <button class="btn-back" (click)="goBack()">Back to Reports</button>
      </div>
    </div>
  </ng-container>
</div>
